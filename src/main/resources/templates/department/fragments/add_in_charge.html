<div xmlns:th="http://www.thymeleaf.org" th:fragment="add_in_charge" class="card">
    <!--/*@thymesVar id="floatedCourse" type="in.ac.amu.zhcet.data.model.FloatedCourse"*/-->
    <!--/*@thymesVar id="inCharge" type="in.ac.amu.zhcet.data.model.CourseInCharge"*/-->
    <div class="card-header">
        <h4 class="card-title">Teacher In Charge</h4>
        <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
        <div class="heading-elements">
            <ul class="list-inline mb-0">
                <li><a data-action="collapse"><i class="icon-minus4"></i></a></li>
                <li><a data-action="reload"><i class="icon-reload"></i></a></li>
                <li><a data-action="expand"><i class="icon-expand2"></i></a></li>
            </ul>
        </div>
    </div>
    <div class="card-body collapse in collapse in">
        <div class="card-block">
            <div class="bs-callout-primary callout-border-left p-1">
                <strong>Add course in-charge by searching</strong><br>
                Search for faculty by faculty ID or name and set multiple in-charge in one go!
            </div>
            <br>
            <div th:replace="fragments/layout :: success(condition = ${float_success}, message = ${float_success})"></div>
            <div th:replace="fragments/layout :: error(condition = ${float_error}, error = ${float_success})"></div>
            <div class="row">
                <div class="col-md-9">
                    <p>Include faculty members of all departments in search?</p>
                </div>
                <div class="col-md-3">
                    <button id="toggle-more" class="btn btn-block btn-outline-primary btn-round" data-toggle="tooltip"
                            data-placement="top" data-original-title="Toggle all faculty members and only Departmental Faculty Members">More</button>
                </div>
            </div>
            <br>
            <input class="incharges twitter-typeahead form-control round mb-1" autocomplete="off" placeholder="Search" />
            <form method="post" th:action="|/department/floated/${floatedCourse.course.code}/in_charge|">
                <div class="in-charge-container">
                    <div class="in-charge" th:each="inCharge : ${floatedCourse.inCharge}">
                        <img src="https://zhcet-web-amu.firebaseapp.com/static/img/account.svg"
                             th:src="${@viewService.getAvatarUrl(inCharge.facultyMember.user.details.avatarUrl)}"
                             class="rounded-circle height-50 in-charge-avatar"/>
                        <input type="text" name="facultyId" th:value="${inCharge.facultyMember.facultyId}" hidden>
                        <span class="capsule mx-1" th:text="${inCharge.facultyMember.facultyId}"></span>
                        <span th:text="${inCharge.facultyMember.user.name}"></span>
                        <span class="mui-select section-select mx-1">
                            <label for="section">Section</label>
                            <select id="section"  name="section">
                                <option value="">&lt;null&gt;</option>
                                <option th:each="section : ${sections}" th:value="${section}" th:text="${section}" th:selected="${inCharge.section == section}"></option>
                            </select>
                        </span>
                        <span><button type="button" class="remove float-xs-right mui-btn mui-btn--small mui-btn--danger mui-btn--fab"><i class="icon-cross2"></i></button></span>
                        <hr>
                    </div>
                </div>
                <br>
                <div th:replace="fragments/layout :: success(condition = ${incharge_success}, message = ${incharge_success})"></div>
                <input type="submit" value="Save" class="btn btn-primary float-xs-right">
            </form>
        </div>
    </div>
    <script id="in-charge-template" type="text/x-tmpl">
        <div class="in-charge new">
            <img src="{%=o.userDetailsAvatarUrl%}" class="rounded-circle height-50 in-charge-avatar"/>
            <input type="text" name="facultyId" value="{%=o.facultyId%}" hidden>
            <span class="capsule mx-1">{%=o.facultyId%}</span>
            <span>{%=o.userName%}</span>
            <span class="mui-select section-select mx-1">
                <label for="section">Section</label>
                <select id="section" name="section">
                    <option value="">&lt;null&gt;</option>
                    <option th:each="section : ${sections}" th:value="${section}" th:text="${section}"></option>
                </select>
            </span>
            <span><button type="button" class="remove float-xs-right mui-btn mui-btn--small mui-btn--danger mui-btn--fab"><i class="icon-cross2"></i></button></span>
            <hr>
        </div>
    </script>
</div>